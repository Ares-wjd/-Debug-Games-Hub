<!-- ai-word-game.html: AI ë‹¨ì–´ ì„¤ëª… ê²Œì„ (localStorage ê¸°ë°˜ ì ìˆ˜ ì €ì¥) -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI ë‹¨ì–´ ì„¤ëª… ê²Œì„</title>
  <style>
    body { font-family: sans-serif; background: linear-gradient(135deg, #1e3c72, #2a5298); color: #fff; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
    .container { background: rgba(0,0,0,0.6); padding: 30px; border-radius: 16px; text-align: center; width: 90%; max-width: 600px; }
    h1 { margin-bottom: 20px; }
    input, button { padding: 10px; margin: 10px 0; border: none; border-radius: 8px; width: 100%; }
    input { font-size: 1em; }
    button { background: #4caf50; color: #fff; font-size: 1em; cursor: pointer; }
    button:hover { background: #43a047; }
    #result { font-size: 1.2em; margin-top: 10px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¤– AI ë‹¨ì–´ ì„¤ëª… ê²Œì„</h1>
    <div id="gameArea">
      <p id="hint">íŒíŠ¸: </p>
      <input type="text" id="answerInput" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”">
      <button onclick="checkAnswer()">ì œì¶œ</button>
      <p id="score">ì ìˆ˜: 0</p>
      <p id="timer">ë‚¨ì€ ì‹œê°„: 180ì´ˆ</p>
      <p id="result"></p>
    </div>
    <div id="endArea" style="display:none;">
      <h2>ê²Œì„ ì¢…ë£Œ</h2>
      <p id="finalScore"></p>
      <button onclick="restartGame()">ë‹¤ì‹œ ì‹œì‘</button>
      <button onclick="goToMain()">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
    </div>
  </div>

  <script>
    const currentUser = JSON.parse(localStorage.getItem('currentUser'));
    let score = 0;
    let timeLeft = 180;
    let timer;
    let questionsAnswered = 0;

    const sampleQuestions = [
      { hint: 'ë„¤ ë‹¤ë¦¬ê°€ ìˆê³  ì•‰ì„ ìˆ˜ ìˆìŒ', answer: 'ì˜ì' },
      { hint: 'í•˜ëŠ˜ì„ ë‚˜ëŠ” íƒˆê²ƒ', answer: 'ë¹„í–‰ê¸°' },
      { hint: 'ì •ë³´ ê²€ìƒ‰ì— ì“°ëŠ” ì‚¬ì´íŠ¸', answer: 'êµ¬ê¸€' },
    ];

    function startGame() {
      nextQuestion();
      timer = setInterval(() => {
        timeLeft--;
        document.getElementById('timer').textContent = `ë‚¨ì€ ì‹œê°„: ${timeLeft}ì´ˆ`;
        if (timeLeft <= 0) endGame();
      }, 1000);
    }

    function nextQuestion() {
      const randomIndex = Math.floor(Math.random() * sampleQuestions.length);
      const question = sampleQuestions[randomIndex];
      document.getElementById('hint').textContent = `íŒíŠ¸: ${question.hint}`;
      document.getElementById('answerInput').setAttribute('data-answer', question.answer);
      document.getElementById('answerInput').value = '';
      document.getElementById('result').textContent = '';
    }

    function checkAnswer() {
      const inputEl = document.getElementById('answerInput');
      const userAnswer = inputEl.value.trim();
      const correctAnswer = inputEl.getAttribute('data-answer');
      if (userAnswer === correctAnswer) {
        score += 25;
        document.getElementById('result').textContent = 'âœ… ì •ë‹µ!';
      } else {
        document.getElementById('result').textContent = `âŒ ì˜¤ë‹µ! ì •ë‹µ: ${correctAnswer}`;
      }
      document.getElementById('score').textContent = `ì ìˆ˜: ${score}`;
      questionsAnswered++;
      setTimeout(nextQuestion, 1000);
    }

    function endGame() {
      clearInterval(timer);
      document.getElementById('gameArea').style.display = 'none';
      document.getElementById('endArea').style.display = 'block';
      document.getElementById('finalScore').textContent = `ìµœì¢… ì ìˆ˜: ${score}ì `;
      saveScoreLocal('AI ë‹¨ì–´ ì„¤ëª… ê²Œì„', score);
    }

    function restartGame() {
      location.reload();
    }

    function goToMain() {
      window.location.href = 'index.html';
    }

    function saveScoreLocal(gameName, score) {
      if (!currentUser) {
        console.warn('ë¡œê·¸ì¸ ì •ë³´ ì—†ìŒ, ì ìˆ˜ ì €ì¥ ìƒëµ');
        return;
      }
      const allData = JSON.parse(localStorage.getItem('allGameRankings') || '[]');
      allData.push({ id: currentUser.id, name: currentUser.name, game: gameName, score: score, timestamp: Date.now() });
      localStorage.setItem('allGameRankings', JSON.stringify(allData));
      console.log('ì ìˆ˜ localStorageì— ì €ì¥ ì™„ë£Œ');
    }

    window.onload = startGame;
  </script>
</body>
</html>
