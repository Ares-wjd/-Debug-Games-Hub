<!-- ai-word-game.html: ì œí•œ ì‹œê°„ ë§‰ëŒ€ UI ì¶”ê°€ -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë””ë²„ê·¸ ë™ì•„ë¦¬ | AI ë‹¨ì–´ ì„¤ëª… ê²Œì„</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
  <style>
    body { font-family: 'Poppins', sans-serif; background: linear-gradient(135deg, #0f2027, #203a43, #2c5364); margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; color: #fff; transition: background-color 0.3s; }
    .container { background: rgba(255, 255, 255, 0.07); backdrop-filter: blur(15px); width: 90%; max-width: 600px; padding: 30px; border-radius: 16px; box-shadow: 0 8px 20px rgba(0,0,0,0.1); text-align: center; }
    input, button { padding: 12px; margin: 10px 0; font-size: 1em; border-radius: 8px; border: none; }
    input { width: 80%; }
    button { background: linear-gradient(135deg, #ff416c, #ff4b2b); color: #fff; cursor: pointer; }
    button:hover { transform: scale(1.05); }
    #result { font-size: 1.2em; margin-top: 10px; font-weight: bold; }
    #finalButtons { margin-top: 20px; }
    #descriptionText { margin: 15px 0; background: rgba(255,255,255,0.1); padding: 10px; border-radius: 12px; display: none; }
    #timeBarContainer { width: 100%; height: 15px; background: #555; border-radius: 8px; margin: 10px 0; overflow: hidden; }
    #timeBar { width: 100%; height: 100%; background: #4caf50; transition: width 1s linear, background-color 0.5s; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¤– AI ë‹¨ì–´ ì„¤ëª… ê²Œì„</h1>
    <div id="gameExplanation">
      <p>AIê°€ í•˜ë‚˜ì”© ì„¤ëª…ì„ ì¶”ê°€í•˜ë©° ì •ë‹µì„ ë§íˆê²Œ ë©ë‹ˆë‹¤.<br>ê²Œì„ì„ ì‹œì‘í•˜ê±°ë‚˜ ê²Œì„ ì„¤ëª…ì„ ë³´ë ¤ë©´ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
      <button onclick="startGame()">ê²Œì„ ì‹œì‘</button>
      <button onclick="showDescription()">ê²Œì„ ì„¤ëª… ë³´ê¸°</button>
      <button onclick="goBack()">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
      <div id="descriptionText">
        <strong>ê²Œì„ ì„¤ëª…:</strong><br>
        - ì œí•œ ì‹œê°„: 180ì´ˆ<br>
        - AIê°€ ë¬¸ì œë‹¹ ìµœëŒ€ 3ê°œì˜ íŒíŠ¸ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì œê³µí•©ë‹ˆë‹¤.<br>
        - í•œ ë¬¸ì œë‹¹ 3íšŒê¹Œì§€ ì •ë‹µì„ ì‹œë„í•  ìˆ˜ ìˆìœ¼ë©°, ì‹œë„ íšŸìˆ˜ì— ë”°ë¼ ì ìˆ˜ê°€ ë‹¤ë¦…ë‹ˆë‹¤.<br>
        (ì²« ì‹œë„: 25ì , ë‘ ë²ˆì§¸ ì‹œë„: 15ì , ì„¸ ë²ˆì§¸ ì‹œë„: 5ì )<br>
        - 3íšŒ ëª¨ë‘ í‹€ë¦¬ë©´ ì •ë‹µì´ ê³µê°œë˜ê³  ë‹¤ìŒ ë¬¸ì œë¡œ ë„˜ì–´ê°‘ë‹ˆë‹¤.<br>
        - ì‹œê°„ì´ ì¢…ë£Œë˜ë©´ ì¦‰ì‹œ ê²Œì„ì´ ì¤‘ë‹¨ë˜ê³  ìµœì¢… ì ìˆ˜ê°€ ê³µê°œë©ë‹ˆë‹¤.
      </div>
    </div>
    <div id="gameArea" style="display:none;">
      <div>ë‚¨ì€ ì‹œê°„: <span id="timer">180</span>ì´ˆ</div>
      <div id="timeBarContainer"><div id="timeBar"></div></div>
      <div id="hint">íŒíŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤</div>
      <input type="text" id="guessInput" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" onkeydown="if(event.key==='Enter') checkAnswer()">
      <button onclick="checkAnswer()">ì œì¶œ</button>
      <div id="scoreBoard">ì ìˆ˜: 0ì </div>
      <div id="result"></div>
      <div id="attempts">ë‚¨ì€ ì‹œë„: 3íšŒ</div>
      <div id="finalButtons" style="display:none;">
        <button onclick="goBack()">ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
      </div>
    </div>
  </div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDwk8QF3jJMzk30QeJR_kFTq6gQXGmoiG4",
      authDomain: "debug-games-hub.firebaseapp.com",
      projectId: "debug-games-hub",
      storageBucket: "debug-games-hub.firebasestorage.app",
      messagingSenderId: "391096300170",
      appId: "1:391096300170:web:156898c1574c15fca9f373"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const problems = [
      { answer: "ì˜ì", hints: ["ì•‰ì„ ìˆ˜ ìˆìŒ", "ë„¤ ë‹¤ë¦¬", "ì±…ìƒ ì˜†ì— ìˆìŒ"] },
      { answer: "í† ë¼", hints: ["ê·€ê°€ ê¸º", "í’€ì„ ë¨¹ìŒ", "ê¹¡ì´ê¹¡ì´"] }
    ];

    let currentIndex = 0, score = 0, hintStep = 0, attempts = 3, timeLeft = 180, timerInterval;
    const hintDiv = document.getElementById('hint');
    const resultDiv = document.getElementById('result');
    const scoreBoard = document.getElementById('scoreBoard');
    const guessInput = document.getElementById('guessInput');
    const attemptsDiv = document.getElementById('attempts');
    const gameExplanation = document.getElementById('gameExplanation');
    const gameArea = document.getElementById('gameArea');
    const finalButtons = document.getElementById('finalButtons');
    const descriptionText = document.getElementById('descriptionText');
    const timerDisplay = document.getElementById('timer');
    const timeBar = document.getElementById('timeBar');
    const body = document.body;

    function startGame() {
      gameExplanation.style.display = 'none';
      gameArea.style.display = 'block';
      finalButtons.style.display = 'none';
      score = 0;
      currentIndex = 0;
      timeLeft = 180;
      updateTimeBar();
      timerDisplay.textContent = timeLeft;
      timerInterval = setInterval(() => {
        timeLeft--;
        timerDisplay.textContent = timeLeft;
        updateTimeBar();
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          endGame();
        }
      }, 1000);
      loadProblem();
    }

    function updateTimeBar() {
      const percent = (timeLeft / 180) * 100;
      timeBar.style.width = percent + '%';
      if (percent > 60) {
        timeBar.style.backgroundColor = '#4caf50'; // ì´ˆë¡
      } else if (percent > 30) {
        timeBar.style.backgroundColor = '#ff9800'; // ì£¼í™©
      } else {
        timeBar.style.backgroundColor = '#f44336'; // ë¹¨ê°•
      }
    }

    function showDescription() {
      descriptionText.style.display = descriptionText.style.display === 'none' ? 'block' : 'none';
    }

    function loadProblem() {
      if (currentIndex >= problems.length) {
        endGame();
        return;
      }
      hintStep = 0;
      attempts = 3;
      attemptsDiv.textContent = `ë‚¨ì€ ì‹œë„: ${attempts}íšŒ`;
      showNextHint();
      guessInput.value = '';
      resultDiv.textContent = '';
    }

    function showNextHint() {
      const currentHints = problems[currentIndex].hints;
      if (hintStep < currentHints.length) {
        hintDiv.textContent = currentHints.slice(0, hintStep + 1).join(', ');
        hintStep++;
      }
    }

    function checkAnswer() {
      const input = guessInput.value.trim();
      if (!input) return;
      if (input === problems[currentIndex].answer) {
        let points = attempts === 3 ? 25 : attempts === 2 ? 15 : 5;
        score += points;
        resultDiv.innerHTML = `<span style='color: #4caf50;'>ì •ë‹µ! +${points}ì </span>`;
        scoreBoard.textContent = `ì ìˆ˜: ${score}ì `;
        flashEffect('#4caf50');
        currentIndex++;
        setTimeout(loadProblem, 1000);
      } else {
        attempts--;
        if (attempts > 0) {
          resultDiv.innerHTML = `<span style='color: #f44336;'>ì˜¤ë‹µ! ë‹¤ìŒ íŒíŠ¸ ì¶”ê°€ (ë‚¨ì€ ì‹œë„ ${attempts}íšŒ)</span>`;
          flashEffect('#f44336');
          attemptsDiv.textContent = `ë‚¨ì€ ì‹œë„: ${attempts}íšŒ`;
          showNextHint();
        } else {
          resultDiv.innerHTML = `<span style='color: #f44336;'>ì‹¤íŒ¨! ì •ë‹µì€ "${problems[currentIndex].answer}"ì˜€ìŠµë‹ˆë‹¤.</span>`;
          flashEffect('#f44336');
          currentIndex++;
          setTimeout(loadProblem, 2000);
        }
      }
      guessInput.value = '';
    }

    function flashEffect(color) {
      const original = body.style.background;
      body.style.background = color;
      setTimeout(() => { body.style.background = ''; }, 300);
    }

    function endGame() {
      clearInterval(timerInterval);
      saveScore();
      resultDiv.innerHTML = `<span style='color: gold;'>ê²Œì„ ì¢…ë£Œ! ìµœì¢… ì ìˆ˜: ${score}ì </span>`;
      flashEffect('#ffd700');
      finalButtons.style.display = 'block';
    }

    function saveScore() {
      const user = JSON.parse(localStorage.getItem('currentUser'));
      if (!user) return;
      const newEntry = {
        id: user.id,
        name: user.name,
        game: 'AI ë‹¨ì–´ ì„¤ëª… ê²Œì„',
        score: score,
        time: new Date().toISOString()
      };
      const newKey = db.ref().child('rankings').push().key;
      const updates = {};
      updates['/rankings/' + newKey] = newEntry;
      db.ref().update(updates);
      alert(`ê²Œì„ ì¢…ë£Œ! ìµœì¢… ì ìˆ˜: ${score}ì `);
    }

    function goBack() {
      window.location.href = '/-Debug-Games-Hub/index.html';
    }
  </script>
</body>
</html>
