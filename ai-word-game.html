<!-- ai-word-game.html: 종료 화면에서 점수와 순위가 확실히 보이도록 수정 -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>디버그 동아리 | AI 단어 설명 게임</title>
  <style>
    body { font-family: 'Poppins', sans-serif; background: radial-gradient(circle at top left, #1c1c1c, #2b5876, #4e4376); margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; color: #fff; }
    .container { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(20px); width: 90%; max-width: 600px; padding: 40px; border-radius: 20px; box-shadow: 0 15px 40px rgba(0,0,0,0.5); text-align: center; animation: fadeIn 1s ease; }
    h1, h2 { margin: 10px 0; }
    input, button { padding: 14px; margin: 10px 0; font-size: 1em; border-radius: 12px; border: none; }
    input { width: 85%; background: rgba(255, 255, 255, 0.2); color: #fff; border: 1px solid rgba(255,255,255,0.3); }
    input::placeholder { color: rgba(255,255,255,0.6); }
    button { width: 90%; background: linear-gradient(135deg, #00c6ff, #0072ff); color: #fff; font-weight: 600; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; }
    button:hover { transform: scale(1.05); box-shadow: 0 8px 20px rgba(0, 114, 255, 0.5); }
    #result { font-size: 1.2em; margin-top: 15px; font-weight: bold; min-height: 1.5em; }
    #finalScoreBox { margin: 20px 0; font-size: 1.6em; color: gold; }
    #finalButtons { margin-top: 20px; }
    #descriptionText { margin: 15px 0; background: rgba(255,255,255,0.1); padding: 12px; border-radius: 14px; display: none; text-align: left; font-size: 0.9em; }
    #timeBarContainer { width: 100%; height: 18px; background: #333; border-radius: 10px; margin: 15px 0; overflow: hidden; }
    #timeBar { width: 100%; height: 100%; background: #4caf50; transition: width 1s linear, background-color 0.5s; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body>
  <div class="container">
    <h1>🤖 AI 단어 설명 게임</h1>
    <div id="gameExplanation">
      <p>AI가 힌트를 하나씩 주며 정답을 맞히게 됩니다. 아래 버튼을 눌러 시작하거나 게임 설명을 확인하세요.</p>
      <button onclick="startGame()">게임 시작</button>
      <button onclick="showDescription()">게임 설명 보기</button>
      <button onclick="goBack()">메인으로 돌아가기</button>
      <div id="descriptionText">
        <strong>게임 설명:</strong><br>
        - 제한 시간: 180초<br>
        - AI가 문제당 최대 3개의 힌트를 순차적으로 제공합니다.<br>
        - 각 문제당 최대 3회 시도, 시도 횟수에 따라 점수 차등 부여 (25점, 15점, 5점)<br>
        - 3회 모두 실패 시 정답 공개 후 다음 문제 진행
      </div>
    </div>
    <div id="gameArea" style="display:none;">
      <div>⏰ 남은 시간: <span id="timer">180</span>초</div>
      <div id="timeBarContainer"><div id="timeBar"></div></div>
      <div id="hint" style="margin: 15px 0; font-size: 1.1em;">힌트가 여기에 표시됩니다</div>
      <input type="text" id="guessInput" placeholder="정답을 입력하세요" onkeydown="if(event.key==='Enter') checkAnswer()">
      <button onclick="checkAnswer()">제출</button>
      <div id="scoreBoard">점수: 0점</div>
      <div id="result"></div>
      <div id="attempts">남은 시도: 3회</div>
    </div>
    <div id="endArea" style="display:none;">
      <h2>🎉 게임 종료</h2>
      <div id="finalScoreBox">최종 점수와 순위를 불러오는 중...</div>
      <div id="finalButtons">
        <button onclick="startGame()">다시 시작</button>
        <button onclick="goBack()">메인으로 돌아가기</button>
      </div>
    </div>
  </div>

  <script>
    const problems = [
      { answer: "의자", hints: ["앉을 수 있음", "네 다리", "책상 옆에 있음"] },
      { answer: "토끼", hints: ["귀가 긺", "풀을 먹음", "깡총깡총"] }
    ];

    let currentIndex = 0, score = 0, hintStep = 0, attempts = 3, timeLeft = 180, timerInterval;
    const hintDiv = document.getElementById('hint');
    const resultDiv = document.getElementById('result');
    const scoreBoard = document.getElementById('scoreBoard');
    const guessInput = document.getElementById('guessInput');
    const attemptsDiv = document.getElementById('attempts');
    const gameExplanation = document.getElementById('gameExplanation');
    const gameArea = document.getElementById('gameArea');
    const endArea = document.getElementById('endArea');
    const finalScoreBox = document.getElementById('finalScoreBox');
    const descriptionText = document.getElementById('descriptionText');
    const timerDisplay = document.getElementById('timer');
    const timeBar = document.getElementById('timeBar');
    const body = document.body;

    function startGame() {
      gameExplanation.style.display = 'none';
      gameArea.style.display = 'block';
      endArea.style.display = 'none';
      score = 0;
      currentIndex = 0;
      timeLeft = 180;
      updateTimeBar();
      timerDisplay.textContent = timeLeft;
      timerInterval = setInterval(() => {
        timeLeft--;
        timerDisplay.textContent = timeLeft;
        updateTimeBar();
        if (timeLeft <= 0) {
          clearInterval(timerInterval);
          endGame();
        }
      }, 1000);
      loadProblem();
    }

    function updateTimeBar() {
      const percent = (timeLeft / 180) * 100;
      timeBar.style.width = percent + '%';
      if (percent > 60) {
        timeBar.style.backgroundColor = '#4caf50';
      } else if (percent > 30) {
        timeBar.style.backgroundColor = '#ff9800';
      } else {
        timeBar.style.backgroundColor = '#f44336';
      }
    }

    function showDescription() {
      descriptionText.style.display = descriptionText.style.display === 'none' ? 'block' : 'none';
    }

    function loadProblem() {
      if (currentIndex >= problems.length) {
        endGame();
        return;
      }
      hintStep = 0;
      attempts = 3;
      attemptsDiv.textContent = `남은 시도: ${attempts}회`;
      showNextHint();
      guessInput.value = '';
      resultDiv.textContent = '';
    }

    function showNextHint() {
      const currentHints = problems[currentIndex].hints;
      if (hintStep < currentHints.length) {
        hintDiv.textContent = currentHints.slice(0, hintStep + 1).join(', ');
        hintStep++;
      }
    }

    function checkAnswer() {
      const input = guessInput.value.trim();
      if (!input) return;
      if (input === problems[currentIndex].answer) {
        let points = attempts === 3 ? 25 : attempts === 2 ? 15 : 5;
        score += points;
        resultDiv.innerHTML = `<span style='color: #4caf50;'>정답! +${points}점</span>`;
        scoreBoard.textContent = `점수: ${score}점`;
        flashEffect('#4caf50');
        currentIndex++;
        setTimeout(loadProblem, 1000);
      } else {
        attempts--;
        if (attempts > 0) {
          resultDiv.innerHTML = `<span style='color: #f44336;'>오답! 다음 힌트 추가 (남은 시도 ${attempts}회)</span>`;
          flashEffect('#f44336');
          attemptsDiv.textContent = `남은 시도: ${attempts}회`;
          showNextHint();
        } else {
          resultDiv.innerHTML = `<span style='color: #f44336;'>실패! 정답은 "${problems[currentIndex].answer}"였습니다.</span>`;
          flashEffect('#f44336');
          currentIndex++;
          setTimeout(loadProblem, 2000);
        }
      }
      guessInput.value = '';
    }

    function flashEffect(color) {
      const original = body.style.background;
      body.style.background = color;
      setTimeout(() => { body.style.background = ''; }, 300);
    }

    function endGame() {
      clearInterval(timerInterval);
      gameArea.style.display = 'none';
      endArea.style.display = 'block';
      finalScoreBox.innerHTML = `🎉 최종 점수: ${score}점`;
    }

    function goBack() {
      window.location.href = '/-Debug-Games-Hub/index.html';
    }
  </script>
</body>
</html>
